{"ast":null,"code":"'use strict';\n\nconst brain = require('brain.js');\n\nconst fetch = require('node-fetch');\n\nlet trainingData = []; // create the neural network\n\nconst net = new brain.NeuralNetwork();\n\nfunction init() {\n  //prepare the trainingsdata\n  getData();\n  startTraining(); //get the train button and make the event listener\n  //let trainButton = document.getElementById(\"train\")\n  //trainButton.addEventListener(\"click\", (e) => startTraining(e))\n  //get the test button and make the event listener\n  //let testButton = document.getElementById(\"test\")\n  //testButton.addEventListener(\"click\", (e) => test(e))\n}\n\nfunction getData() {\n  fetch('http://localhost:1348/user').then(res => res.json()).then(json => parseData(json));\n}\n\nfunction parseData(raw) {\n  let name_index;\n  let name_float;\n  let date_to_number;\n  let long;\n  let lat;\n  let car;\n\n  for (var row in raw) {\n    name_index = parseInt(raw[row].title, 10);\n    name_float = name_index / 19; //console.log(name_index + \", \" + car)\n    //console.log(name_index)\n\n    if (raw[row].date != \"0000-00-00 00:00:00\") {\n      date_to_number = 1 / (Date.parse(raw[row].date) / 1000000000000);\n    } else {\n      date_to_number = 0.7;\n    } //console.log(date_to_number)\n\n\n    long = 1 / raw[row].longtitude;\n    lat = 10 / raw[row].latitude;\n    car = raw[row].car;\n    trainingData.push({\n      input: [name_float, date_to_number, long, lat],\n      output: {\n        iscar: car\n      }\n    });\n  }\n\n  console.log(trainingData);\n} // ******************************************************************************************\n//\n// start continuously classifying the webcam\n//\n// ******************************************************************************************\n\n\nfunction startTraining(e) {\n  net.train(trainingData);\n  info.innerHTML = \"Training Complete!\";\n}\n\nfunction test() {\n  for (let i = 0; i < 20; i++) {\n    const result = net.run([i / 19, 0.7, 0.2, 0.2]);\n    console.log(result);\n\n    if (Math.round(result.iscar)) {} else {}\n  }\n}\n\nexport { init };","map":{"version":3,"sources":["/Users/sanderdechering/Documents/School/HSR/Lesjaar_2/TLE/TLE_2/flexlease1/src/training.js"],"names":["brain","require","fetch","trainingData","net","NeuralNetwork","init","getData","startTraining","then","res","json","parseData","raw","name_index","name_float","date_to_number","long","lat","car","row","parseInt","title","date","Date","parse","longtitude","latitude","push","input","output","iscar","console","log","e","train","info","innerHTML","test","i","result","run","Math","round"],"mappings":"AAAA;;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,YAAD,CAArB;;AACA,IAAIE,YAAY,GAAG,EAAnB,C,CAEA;;AACA,MAAMC,GAAG,GAAG,IAAIJ,KAAK,CAACK,aAAV,EAAZ;;AAEA,SAASC,IAAT,GAAe;AACX;AACAC,EAAAA,OAAO;AACPC,EAAAA,aAAa,GAHF,CAIX;AACA;AACA;AAEA;AACA;AACA;AACH;;AAED,SAASD,OAAT,GAAkB;AACdL,EAAAA,KAAK,CAAC,4BAAD,CAAL,CACKO,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUE,IAAI,IAAIC,SAAS,CAACD,IAAD,CAF3B;AAGH;;AAED,SAASC,SAAT,CAAmBC,GAAnB,EAAuB;AACnB,MAAIC,UAAJ;AACA,MAAIC,UAAJ;AACA,MAAIC,cAAJ;AACA,MAAIC,IAAJ;AACA,MAAIC,GAAJ;AACA,MAAIC,GAAJ;;AAEA,OAAI,IAAIC,GAAR,IAAeP,GAAf,EAAmB;AACfC,IAAAA,UAAU,GAAGO,QAAQ,CAACR,GAAG,CAACO,GAAD,CAAH,CAASE,KAAV,EAAiB,EAAjB,CAArB;AACAP,IAAAA,UAAU,GAAGD,UAAU,GAAC,EAAxB,CAFe,CAIf;AAEA;;AACA,QAAGD,GAAG,CAACO,GAAD,CAAH,CAASG,IAAT,IAAiB,qBAApB,EAA0C;AACtCP,MAAAA,cAAc,GAAG,KAAGQ,IAAI,CAACC,KAAL,CAAWZ,GAAG,CAACO,GAAD,CAAH,CAASG,IAApB,IAA0B,aAA7B,CAAjB;AACH,KAFD,MAEK;AACDP,MAAAA,cAAc,GAAG,GAAjB;AACH,KAXc,CAYf;;;AACAC,IAAAA,IAAI,GAAG,IAAEJ,GAAG,CAACO,GAAD,CAAH,CAASM,UAAlB;AACAR,IAAAA,GAAG,GAAG,KAAGL,GAAG,CAACO,GAAD,CAAH,CAASO,QAAlB;AACAR,IAAAA,GAAG,GAAGN,GAAG,CAACO,GAAD,CAAH,CAASD,GAAf;AAEAhB,IAAAA,YAAY,CAACyB,IAAb,CAAmB;AAACC,MAAAA,KAAK,EAAE,CAACd,UAAD,EAAaC,cAAb,EAA6BC,IAA7B,EAAmCC,GAAnC,CAAR;AAAiDY,MAAAA,MAAM,EAAE;AAACC,QAAAA,KAAK,EAAEZ;AAAR;AAAzD,KAAnB;AACH;;AACDa,EAAAA,OAAO,CAACC,GAAR,CAAY9B,YAAZ;AACH,C,CAED;AACA;AACA;AACA;AACA;;;AACA,SAASK,aAAT,CAAuB0B,CAAvB,EAA0B;AACtB9B,EAAAA,GAAG,CAAC+B,KAAJ,CAAUhC,YAAV;AACAiC,EAAAA,IAAI,CAACC,SAAL,GAAiB,oBAAjB;AACH;;AAED,SAASC,IAAT,GAAgB;AACZ,OAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,EAAnB,EAAuBA,CAAC,EAAxB,EAA2B;AACvB,UAAMC,MAAM,GAAGpC,GAAG,CAACqC,GAAJ,CAAQ,CAACF,CAAC,GAAC,EAAH,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,CAAR,CAAf;AAEAP,IAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;;AACA,QAAGE,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACT,KAAlB,CAAH,EAA4B,CAE3B,CAFD,MAEO,CAEN;AACJ;AAEJ;;AAED,SAASzB,IAAT","sourcesContent":["'use strict';\r\nconst brain = require('brain.js')\r\nconst fetch = require('node-fetch');\r\nlet trainingData = []\r\n\r\n// create the neural network\r\nconst net = new brain.NeuralNetwork()\r\n\r\nfunction init(){\r\n    //prepare the trainingsdata\r\n    getData()\r\n    startTraining()\r\n    //get the train button and make the event listener\r\n    //let trainButton = document.getElementById(\"train\")\r\n    //trainButton.addEventListener(\"click\", (e) => startTraining(e))\r\n\r\n    //get the test button and make the event listener\r\n    //let testButton = document.getElementById(\"test\")\r\n    //testButton.addEventListener(\"click\", (e) => test(e))\r\n}\r\n\r\nfunction getData(){\r\n    fetch('http://localhost:1348/user')\r\n        .then(res => res.json())\r\n        .then(json => parseData(json));\r\n}\r\n\r\nfunction parseData(raw){\r\n    let name_index\r\n    let name_float\r\n    let date_to_number\r\n    let long\r\n    let lat\r\n    let car\r\n\r\n    for(var row in raw){\r\n        name_index = parseInt(raw[row].title, 10)\r\n        name_float = name_index/19\r\n\r\n        //console.log(name_index + \", \" + car)\r\n\r\n        //console.log(name_index)\r\n        if(raw[row].date != \"0000-00-00 00:00:00\"){\r\n            date_to_number = 1/(Date.parse(raw[row].date)/1000000000000);\r\n        }else{\r\n            date_to_number = 0.7\r\n        }\r\n        //console.log(date_to_number)\r\n        long = 1/raw[row].longtitude\r\n        lat = 10/raw[row].latitude\r\n        car = raw[row].car\r\n\r\n        trainingData.push( {input: [name_float, date_to_number, long, lat], output: {iscar: car}})\r\n    }\r\n    console.log(trainingData)\r\n}\r\n\r\n// ******************************************************************************************\r\n//\r\n// start continuously classifying the webcam\r\n//\r\n// ******************************************************************************************\r\nfunction startTraining(e) {\r\n    net.train(trainingData)\r\n    info.innerHTML = \"Training Complete!\"\r\n}\r\n\r\nfunction test() {\r\n    for(let i = 0; i < 20; i++){\r\n        const result = net.run([i/19, 0.7, 0.2, 0.2])\r\n\r\n        console.log(result)\r\n        if(Math.round(result.iscar)){\r\n\r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport { init }\r\n    \r\n\r\n"]},"metadata":{},"sourceType":"module"}
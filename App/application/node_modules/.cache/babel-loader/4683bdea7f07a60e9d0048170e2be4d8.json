{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = softmax;\n\nvar _ = require('./');\n\nvar _2 = _interopRequireDefault(_);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n *\n * @param {Matrix} m\n * @returns {Matrix}\n */\n\n\nfunction softmax(m) {\n  var result = new _2.default(m.rows, m.columns); // probability volume\n\n  var maxVal = -999999;\n\n  for (var i = 0; i < m.weights.length; i++) {\n    if (m.weights[i] > maxVal) {\n      maxVal = m.weights[i];\n    }\n  }\n\n  var s = 0;\n\n  for (var _i = 0; _i < m.weights.length; _i++) {\n    result.weights[_i] = Math.exp(m.weights[_i] - maxVal);\n    s += result.weights[_i];\n  }\n\n  for (var _i2 = 0; _i2 < m.weights.length; _i2++) {\n    result.weights[_i2] /= s;\n  } // no backward pass here needed\n  // since we will use the computed probabilities outside\n  // to set gradients directly on m\n\n\n  return result;\n}","map":null,"metadata":{},"sourceType":"script"}